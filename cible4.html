<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Cible 4</title>
<link rel="stylesheet" type="text/css" href="style.css" />
<script type="text/javascript" src="brython/brython.js"></script>
<script type="text/javascript" src="brython/brython_stdlib.js"></script>

<script id="python_script" type="text/python">
from browser import document, bind
import turtle

def setup():
    turtle.restart()
    _code = document['pre-src'].text
    exec(_code)

@bind('#run', 'click')
def action(ev):
    turtle.restart()
    _code = document['pre-src'].text + document['user-src'].text
    exec(_code)
    tortue_rouge.goto(tortue.position())
    turtle.done()

setup()

# keep this line at the end (user notification)
document['run'].text = "Exécuter le programme"
</script>

</head>

<body onload="brython(1)">
<h1>Exercice des cibles vertes et bleues</h1>

<pre id="pre-src" style="display: none;">
import turtle
turtle.set_defaults(
    canvwidth = 600,
    canvheight = 600,
    turtle_canvas_wrapper = document['turtle-div']
   # , turtle_canvas_id = 'turtle-canvas' # default, could be overriden
  )
# Espace de jeu
taille = 300
x_pos_axe, y_pos_axe = 200, 200

def visible(tortue):
    return tortue.xcor() >= -taille and \
           tortue.xcor() <=  taille and \
           tortue.ycor() >= -taille and \
           tortue.ycor() <=  taille

def deplacer(t, x, y):
    t.goto(x-300+x_pos_axe, y-300+y_pos_axe)

def deplacer_depart(x, y):
    deplacer(tortue_depart, x, y)
    deplacer(tortue_noire, x, y)
    deplacer(tortue_rouge, x, y)

# Grille
t = turtle.Turtle()
t.speed(0)
t.hideturtle()
t.width(1)
t.color('yellow')

def create_line(x0, y0, x1, y1):
    t.penup()
    t.goto(x0, y0)
    t.pendown()
    t.goto(x1, y1)

i = -taille
while i <= taille:
    create_line(-taille, i, taille, i)
    create_line(i, -taille, i, taille)
    i = i + 10

# Repere
t.color('black')
create_line(-taille, -taille + y_pos_axe, taille, -taille + y_pos_axe)
create_line(-taille + x_pos_axe, -taille, -taille + x_pos_axe, taille)
t.penup()
deplacer(t, 380, 5)
t.write("x")
deplacer(t, 5, 380)
t.write("y")

# Mise en place des tortues
tortue_depart = turtle.Turtle()
tortue_depart.shape("circle")
tortue_depart.color("red")
tortue_depart.penup()
tortue_depart.speed(0)

tortue_noire = turtle.Turtle()
tortue_noire.shape("turtle")
tortue_noire.penup()
tortue_noire.speed(0)

tortue_rouge = turtle.Turtle()
tortue_rouge.pencolor("red")
tortue_rouge.penup()
tortue_rouge.speed(0)

deplacer_depart(10, 20)

cible1 = turtle.Turtle()
cible1.shape("circle")
cible1.color("blue")
cible1.penup()
cible1.speed(0)

cible2 = turtle.Turtle()
cible2.shape("circle")
cible2.color("blue")
cible2.penup()
cible2.speed(0)

cible3 = turtle.Turtle()
cible3.shape("circle")
cible3.color("green")
cible3.penup()
cible3.speed(0)

cible4 = turtle.Turtle()
cible4.shape("circle")
cible4.color("green")
cible4.penup()
cible4.speed(0)

deplacer(cible1, 110,  50)
deplacer(cible2, 310, 110)
deplacer(cible3,  70,  80)
deplacer(cible4, 270, 300)

def marche(x, y):
    tortue.forward(x)
    tortue.left(90)
    tortue.forward(y)
    tortue.right(90)

# Vitesse de 1 à 50, 0 pour le plus vite possible
tortue_noire.speed(5)
tortue_rouge.speed(5)
tortue_noire.pendown()
tortue_rouge.pendown()

turtle.done()
</pre>

<div id="colonne-gauche">
<pre id="user-src" style="float:left" contenteditable="true">
deplacer_depart(10, 20)

deplacer(cible1, 110,  50)
deplacer(cible2, 310, 110)
deplacer(cible3,  70,  80)
deplacer(cible4, 270, 300)

# Valeurs à changer
Δx = 10
Δy = 10

# Déplacement
while visible(tortue):
    marche(Δx, Δy)

</pre>

<p><button id="run">Veuillez patienter…</button></p>

</div>

<div id="grille"><span id="turtle-div"> </span></div>

<p class="nav">
  <a href="cible3.html">Page précédente</a>
</p>

<br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br>
</body>

</html>

